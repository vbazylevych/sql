CREATE TABLE car(
id int AUTO_INCREMENT PRIMARY KEY ,
license VARCHAR(25) NOT NULL UNIQUE,
color VARCHAR(50),
year INT CHECK(year > 1900),
model varchar(50)
);

INSERT INTO car (license, color, year, model)
VALUES ( 'krot', 'blue', 1998, 'opel');
INSERT INTO car (license, color, year, model)
VALUES ( 'ttt', 'blue', 1901, 'opel');
INSERT INTO car (license, color, year, model)
VALUES ( 'yy', 'red', 2017, 'mazda');
INSERT INTO car (license, color, year, model)
VALUES ( 'tuuutt', 'red', 2017, 'kotiazda');
INSERT INTO car (license, color, year, model)
VALUES ( 'au197345', 'pink', 2000, 'bmv');

CREATE TABLE user(
id int AUTO_INCREMENT PRIMARY KEY ,
name VARCHAR(20) NOT NULL ,
surname VARCHAR(50),
contact_info VARCHAR(255) NOT NULL
);

INSERT INTO user (name, surname, contact_info)
VALUES ( 'vasia', null, 'tel 063444445 adres Agetstvo " Mir');

INSERT INTO user (name, surname, contact_info)
VALUES ( 'vasia', 'kolia', 'tel 911 ');

INSERT INTO user (name, surname, contact_info)
VALUES ( 'alena', 'ignatieva',  'kot@gmail.com');

CREATE TABLE deal(
id int AUTO_INCREMENT PRIMARY KEY ,
ads_id  int ,
status ENUM ('active', 'decline', 'accept'),
deal_price int check (deal_price > 0)
);

CREATE TABLE ads(
id int AUTO_INCREMENT PRIMARY KEY ,
user_id  int NOT NULL  ,
car_id int NOT NULL,
price int check (price > 0),
deal_id int default NULL
);

ALTER TABLE ads ADD CONSTRAINT user_id FOREIGN KEY(user_id)  REFERENCES user(ID);
ALTER TABLE ads ADD CONSTRAINT deal_id FOREIGN KEY (deal_id) REFERENCES deal(ID);
ALTER TABLE ads ADD CONSTRAINT car_id FOREIGN KEY (car_id) REFERENCES car(ID);
ALTER TABLE deal ADD CONSTRAINT ads_id FOREIGN KEY(ads_id) REFERENCES ads(ID);


insert into ads (user_id, car_id, price )
values(1, 2, 100500);
insert into ads (user_id, car_id, price )
values(3, 4, 1);
insert into ads (user_id, car_id, price )
values(2,5 , 10);

insert into deal (ads_id, status, deal_price, )
values(1, 'active', 10034);
insert into deal (ads_id, status, deal_price, )
values(1, 'active', 100500);
insert into deal (ads_id, status, deal_price, )
values(1, 'decline', 10034);
insert into deal (ads_id, status, deal_price, )
values(1, 'accept', 1005001);
insert into deal (ads_id, status, deal_price, )
values(2, 'active', 10034);
insert into deal (ads_id, status, deal_price, )
values(2, 'active', 100500);
insert into deal (ads_id, status, deal_price, )
values(2, 'decline', 10034);
insert into deal (ads_id, status, deal_price, )
values(3, 'active', 1005001);

insert into ads (user_id, car_id, price, deal_id )
values(1, 1, 100500, 4);
